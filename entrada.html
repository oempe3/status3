<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4f46e5">
  <title>Entrada de Dados - Pernambuco III</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    /* [Seus estilos existentes...] */

    /* Novos estilos adicionados */
    .loading-spinner {
      animation: rotate 1s linear infinite;
      width: 16px;
      height: 16px;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .info-message {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }
  </style>
</head>
<body>
  <!-- [Seu HTML existente...] -->

  <script>
    // Configurações globais
    const CONFIG = {
      ENDPOINT: "https://script.google.com/macros/s/AKfycbwgvaJJX3QYDrfrz55QHp-GWcO85J672Eo9D__UIi5SDAbJ6BgHTyEm_kHgl2uynejTOg/exec",
      CACHE_TIME: 300000 // 5 minutos de cache
    };

    // Estado da aplicação
    const state = {
      equipamentos: [],
      filteredEquipamentos: [],
      selectedEquipamento: null,
      lastFetch: 0
    };

    // Inicialização
    document.addEventListener("DOMContentLoaded", () => {
      initApp();
      setInterval(updateClock, 1000);
    });

    async function initApp() {
      await loadEquipamentos();
      setupEventListeners();
    }

    function setupEventListeners() {
      document.getElementById("filtro-equipamento").addEventListener("change", applyFilters);
      document.getElementById("filtro-status-busca").addEventListener("change", applyFilters);
      document.getElementById("status-edicao").addEventListener("change", updateConditionalFields);
      document.getElementById("btn-salvar").addEventListener("click", saveEquipamento);
      document.querySelector("button[onclick='limparFiltros()']").addEventListener("click", clearFilters);
      document.querySelector("button[onclick='carregarEquipamentos()']").addEventListener("click", loadEquipamentos);
    }

    // [Todas as outras funções otimizadas que forneci anteriormente...]
    // Incluindo: loadEquipamentos, saveEquipamento, applyFilters, etc.
    
    // Função para baixar todos os arquivos como um pacote ZIP
    function downloadAllFiles() {
      // Esta função seria implementada se você quisesse oferecer um download completo
      console.log("Preparando todos os arquivos para download...");
    }
  </script>
</body>
</html>